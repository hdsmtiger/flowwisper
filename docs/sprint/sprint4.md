# Sprint 4：稳定性、诊断与可访问性

## 目标
完成面向 GA 的稳定性与合规强化，覆盖片段库管理、诊断工具、性能/安全指标以及可访问性适配，确保产品可在企业环境大规模部署。

## User Cases

1. **UC4.1 片段库管理与共享准备**  
   - 描述：在桌面端管理最多 200 条语音片段，支持导入/导出 CSV 并进行口令冲突校验。  
   - 验收要点：新增/编辑表单支持变量占位符校验；批量导入时提供错误报告；操作后同步至云端并保留审计记录。  
   - 需求来源：PRD 5.3、8.3；架构 5.2、6.3。

2. **UC4.2 性能与稳定性监控**  
   - 描述：实现端到端性能指标采集（延迟、CPU/内存），并将异常事件上报 Prometheus/日志系统以满足 <0.5% 崩溃率目标。  
   - 验收要点：核心会话指标实时写入本地与云端监控；当延迟超阈值时触发告警；支持导出最近 72 小时日志。  
   - 需求来源：PRD 9；架构 5.2、5.4、7。

3. **UC4.3 诊断日志上传与问题报告**  
   - 描述：用户可从设置页导出或一键上传诊断日志，并获取追踪 ID 反馈给支持团队。  
   - 验收要点：压缩日志并在 60 秒内完成上传；上传失败提供重试与离线导出；追踪 ID 写入通知中心。  
   - 需求来源：PRD 5.3、8.4；架构 5.2、5.4。

4. **UC4.4 可访问性与多语言兼容性验证**  
   - 描述：确保 UI 符合 WCAG 2.1 AA，对 VoiceOver/NVDA 提供语音提示，并验证多语言自动检测覆盖范围。  
   - 验收要点：高对比度主题通过对比度测试；辅助功能模式下提供字幕条；多语言检测至少覆盖中文、英文及 Beta 阶段新增 5 种语言测试用例。  
   - 需求来源：PRD 4、9；架构 5.1、5.3。

5. **UC4.5 安全加密与密钥轮换**  
   - 描述：完成本地 SQLCipher、语音缓存 AES-256 加密验证，并支持企业租户密钥轮换流程。  
   - 验收要点：密钥存储在 Secure Enclave/TPM；轮换后旧数据重新加密；合规模式下生成审计日志并通过 API 通知租户。  
   - 需求来源：PRD 8.4、9；架构 5.2、5.5。
