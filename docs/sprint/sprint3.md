# Sprint 3：云端混合与智能增强

## 目标
引入云端语音与 AI 能力，在保持低延迟的同时实现智能润色、格式指令与跨设备同步，增强核心语音输入体验。

## User Cases

1. **UC3.1 云端/本地混合引擎切换**  
   - 描述：根据网络质量与用户策略在本地、云端或混合模式间自动切换，并在失败时 1 秒内回退本地。  
   - 验收要点：监控 RTT 与错误率；触发降级时展示横幅提示；切换过程不中断录音；日志记录切换事件。  
   - 需求来源：PRD 6、7.3、8.2；架构 5.2、5.3、6.1。

2. **UC3.2 AI 润色与摘要增量输出**  
   - 描述：会话中调用云端 GPT-4o mini 实时生成润色稿，并在会话结束 10 秒内生成摘要与要点。  
   - 验收要点：润色延迟 ≤2.5s；摘要生成在 10 秒内完成并可导出 Markdown；网络异常时回退至本地规则润色。  
   - 需求来源：PRD 4、5.2、8.3；架构 5.3、7。

3. **UC3.3 语音指令格式化与片段触发**  
   - 描述：实时解析“新段落”“项目符号”等语音指令及片段口令，应用相应格式或弹出变量表单。  
   - 验收要点：识别指令成功率 ≥95%；片段触发时显示变量填充表单；完成后插入目标文本并记录到历史。  
   - 需求来源：PRD 5.2、8.3；架构 5.2、5.3、6.3。

4. **UC3.4 历史同步与冲突解决**  
   - 描述：将本地历史、片段库与设置差同步到云端，支持离线排队与冲突提示。  
   - 验收要点：断网期间缓存增量；恢复后完成 token 交换与合并；冲突时展示差异并允许用户选择本地/云端版本。  
   - 需求来源：PRD 5.2、8.3；架构 5.2、5.4、5.5、6.2。

5. **UC3.5 企业租户密钥与合规模式**  
   - 描述：企业用户可启用合规模式，录入租户密钥后强制云端数据加密与审计日志上传。  
   - 验收要点：开启后锁定相关设置项；所有云端请求附带租户密钥验证；审计日志在 60 秒内上传并返回追踪 ID。  
   - 需求来源：PRD 5.3、6、9；架构 5.4、5.5。
